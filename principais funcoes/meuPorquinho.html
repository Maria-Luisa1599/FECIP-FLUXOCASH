<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FluxoCash</title>
    <link rel="icon" href="../assets/imgs/favIcon.png" />
    <link rel="stylesheet" href="../assets/css/home.css" />
    <link rel="stylesheet" href="../principais funcoes/css/meuPorquinho.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    />
  </head>
  <body>
    <!-- inseri aqui igual está na cadastro.html -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script>
      const supabaseUrl = "https://chvaqdzgvfqtcfaccomy.supabase.co";
      const supabaseKey =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNodmFxZHpndmZxdGNmYWNjb215Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUyMDU3ODIsImV4cCI6MjA3MDc4MTc4Mn0.0Wosp2gv_RfE1qVj4uClMSX3WmWLvpkqfLhe6Yhbw2I";
      window.supabase = supabase.createClient(supabaseUrl, supabaseKey);
    </script>

    <nav class="menu-lateral">
      <div class="btn-expandir">
        <i class="bi bi-list"></i>
        <span>INÍCIO</span>
      </div>
      <ul>
        <li class="item-menu">
          <a href="../principais funcoes/fluxocash.html">
            <span class="icon">
              <i class="bi bi-cash-coin"></i>
            </span>
            <span class="txt-link"> Transações </span>
          </a>
        </li>
        <li class="item-menu">
          <a href="../principais funcoes/graficos.html">
            <span class="icon">
              <i class="bi bi-pie-chart-fill"></i>
            </span>
            <span class="txt-link"> Gráficos </span>
          </a>
        </li>
        <li class="item-menu">
          <a href="../principais funcoes/relatorio.html">
            <span class="icon">
              <i class="bi bi-clipboard-data"></i>
            </span>
            <span class="txt-link"> Relatórios </span>
          </a>
        </li>
        <li class="item-menu">
          <a href="../principais funcoes/meuPorquinho.html">
            <span class="icon">
              <i class="bi bi-piggy-bank-fill"></i>
            </span>
            <span class="txt-link">Meu porquinho</span>
          </a>
        </li>
      </ul>
    </nav>
    <header>
      <div class="dadosUser">
        <span id="nomeUserTela"></span>
        <div>
          <img
            src="../assets/imgs/mainImg/userImg.png"
            alt="Imagem do Usuário"
          />
        </div>
        <span class="logout">
          <a href="../index.html"> Sair da conta </a>
        </span>
      </div>
      <main>
        <!-- Configuração da meta -->
        <div class="caixa meta">
          <h1>Meu Porquinho</h1>
          <label>Meta (R$):</label><br />
          <input type="number" id="meta" placeholder="Ex: 5000" /><br />

          <label>Prazo (meses):</label><br />
          <input type="number" id="prazo" placeholder="Ex: 12" /><br />

          <label>Depósito mensal planejado (R$):</label><br />
          <input type="number" id="mensal" placeholder="Ex: 300" /><br />

          <button onclick="calcular()">Calcular</button>

          <div id="resultado"></div>
        </div>

        <!-- Cofrinho fictício -->
        <div style="display: none" class="caixa cofrinho">
          <h2>Seu Cofrinho</h2>
          <div id="totalCofrinho">Total guardado: R$ 0,00</div>
          <br />

          <div style="width: 100%">
            <input
              type="number"
              id="valorDeposito"
              placeholder="Valor a depositar (R$)"
            />
            <button onclick="depositar()">Depositar</button>
          </div>
          <div style="width: 100%">
            <input
              type="number"
              id="valorRetirada"
              placeholder="Valor a retirar (R$)"
            />
            <button onclick="retirar()">Retirar</button>
          </div>
        </div>
      </main>
    </header>
    <script src="../bd/meuPorquinhoBd.js"></script>
    <script type="module" src="../bd/meuPorquinhoBd.js"></script>
    <script>
      const usuario = localStorage.getItem("usuarioLogado");
      document.getElementById("nomeUserTela").textContent =
        usuario ?? "Visitante";
    </script>
  </body>
</html>
